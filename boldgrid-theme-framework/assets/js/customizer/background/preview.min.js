import PaletteSelector from"../color/palette-selector";const $=jQuery,api=wp.customize;export class Preview{constructor(){this.selector=new PaletteSelector,this.$body=$("body")}init(){return $(()=>this._onLoad()),this}setImage(){if("image"===api("boldgrid_background_type")()){const e=api("background_image")();let t="";e&&api("bgtfw_background_overlay")()?t=this._getOverlayCss(e):e&&(t=`url("${e}")`),this.$body.css("background-image",t)}}_onLoad(){this._setupImageChange()}_getOverlayCss(e){const t=this.selector.getColor(api("bgtfw_background_overlay_color")()),a=api("bgtfw_background_overlay_alpha")(),o=parent.net.brehaut.Color(t).setAlpha(a).toString();return`linear-gradient(to left, ${o}, ${o}), url("${e}")`}_setupImageChange(){api("bgtfw_background_overlay_alpha","bgtfw_background_overlay","bgtfw_background_overlay_color","background_image",(...e)=>{e.map(e=>e.bind(()=>this.setImage()))})}}