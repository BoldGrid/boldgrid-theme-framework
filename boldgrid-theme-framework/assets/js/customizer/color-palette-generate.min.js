var BOLDGRID=BOLDGRID||{};BOLDGRID.COLOR_PALETTE=BOLDGRID.COLOR_PALETTE||{},BOLDGRID.COLOR_PALETTE.Generate=BOLDGRID.COLOR_PALETTE.Generate||{},function(e){"use strict";var t=BOLDGRID.COLOR_PALETTE.Generate;t.palette_collection=BOLDGRIDColorPalettes.palettes;var n=["fiveToneAScheme","fiveToneBScheme","fiveToneCScheme","fiveToneDScheme","fiveToneEScheme","neutralScheme","neutralScheme","neutralScheme","analogousScheme","analogousScheme","analogousScheme"],a=["monochromatic","intesity_and_hue","complementaryScheme","splitComplementaryScheme","splitComplementaryCWScheme","triadicScheme","tetradicScheme"],r=["compliment","blend","copy"],o=["saturateByAmount","lightenByAmount","shiftHue"],h=["#FFFFF2","#FBF5E6","#FFFFFF","#F6F9ED","#FDFDF0","#EBECE4","#ECF1EF","#FFFFFE","#FCF6CF","#FEFFEF","#FFFFFD","#FFFFF3","#FEF1E9","#FEF6E4","#EEF3E2","#292929","#4d4d4d","#1a1a1a"];t.get_random_color=function(){for(var e="0123456789ABCDEF".split(""),t="#",n=0;6>n;n++)t+=e[Math.floor(16*Math.random())];return t},t.randomArrayElement=function(e){return e[Math.floor(Math.random()*e.length)]},t.generateNeutralColor=function(e){var n,a,r=Math.random(),o=null,u=.5,i=.9;return r>u?(n=t.randomArrayElement(e),a=net.brehaut.Color(n),o=a.setLightness(i).toCSS()):o=t.randomArrayElement(h),o},t.findMatches=function(t){var n={};return e.each(t,function(a,r){e.each(t,function(e,t){t==r&&e!==a&&(n[t]||(n[t]=[]),-1===n[t].indexOf(a)&&n[t].push(a),-1===n[t].indexOf(e)&&n[t].push(e))})}),n},t.findRelations=function(n){var a,r=[];return a=t.findMatches(n),!1===e.isEmptyObject(a)&&e.each(a,function(){r.push({type:"match",values:this})}),r},t.determineRelations=function(n){var a={},r=[],o=t.findRelations(n.samplePalette);return e.each(o,function(t){var a=!0;e.each(this.values,function(){return n.partialPalette[this]?(a=!1,!1):void 0}),a&&r.push(this)}),r.length?a={type:"samplePalette",relationsData:r}:e.each(n.additionalSamplePalattes,function(){return r=t.findRelations(this),r.length?(a={type:"additionalSamplePalattes",relationsData:r},!1):void 0}),a},t.applyRelationships=function(t,n,a){var r=t.slice(0);return e.each(n.relationsData,function(){var t,n=this;"match"==n.type&&(e.each(n.values,function(){var e=a.indexOf(this);-1!==e&&(t=this)}),t||(t=n.values[Math.floor(Math.random()*n.values.length)]),e.each(n.values,function(){r[this]=r[t]}))}),r},t.findLockedIndexes=function(t){var n=[];return e.each(t,function(e){this&&n.push(e)}),n},t.determineRelationalCount=function(e,t){var n;return n=2/3,"additionalSamplePalattes"==e&&(n=1/3),Math.floor(t*n)},t.generate_palette_collection=function(e,n){n||(n=5);for(var a=t.determineRelations(e),r=t.findLockedIndexes(e.partialPalette),o=t.determineRelationalCount(a.type,n),h=[],u=0;n>u;u++){var i=t.generate_palette(e);if("object"==typeof i&&i.length){var l="samplePalette"==a.type&&o>u||"additionalSamplePalattes"==a.type&&u>=n-o;l&&(i=t.applyRelationships(i,a,r)),h.push(i)}}return h},t.generate_palette=function(r){var o=[],h=t.partial_palette_into_colors_palette(r.partialPalette),u=t.is_palette_empty(h.palette);if(u)o=t.get_palette_from_static_list(h.palette);else if(h.unchanged_keys.length>1){var i=t.generate_palette_from_partial(h.palette);o=t.randomize_palette(i,h.unchanged_keys)}else{var l=Math.floor(3*Math.random())+1;if(1==l){var s=a[Math.floor(Math.random()*a.length)];o=t.color_palettes[s](h.palette[h.unchanged_keys[0]])}else if(2==l){var c=n[Math.floor(Math.random()*n.length)];o=h.palette[h.unchanged_keys[0]][c]()}else{var p=t.random_array(4,5);p.unshift(0),o=h.palette[h.unchanged_keys[0]].schemeFromDegrees(p)}o=t.randomize_palette(o,[0]),o=t.format_palette_to_unchanged(o,h.unchanged_keys[0]),o=t.truncate_generated_palette(o,h.palette)}var f=o.slice(0);return e.each(h.unchanged_keys,function(){f[this]=r.partialPalette[this]}),f},t.truncate_generated_palette=function(e,t){for(var n=[],a=0;a<t.length;a++)n.push(e[a]);return n},t.format_palette_to_unchanged=function(t,n){var a=t[0],r={};return r[n]=a,r[0]=t[n],e.each(t,function(e){0!==e&&e!==n&&(r[e]=this)}),r=e.map(r,function(e,t){return[e]})},t.partial_palette_into_colors_palette=function(t){var n=[],a=[];return e.each(t,function(e){if(this){var t=net.brehaut.Color(this);t.getLightness()<.9&&t.getLightness()>.1&&t.getSaturation()>.15?n.push(t):n.push(null),a.push(e)}else n.push(null)}),{palette:n,unchanged_keys:a}},t.get_palette_from_static_list=function(n){var a=[];return e.each([1,2],function(){var e=t.palette_collection[Math.floor(Math.random()*t.palette_collection.length)];if(e.length>=n.length)if(e.length>n.length)for(var r=0;r<n.length;r++)a.push(e[r]);else e.length===n.length&&(a=e);return a.length?!1:void 0}),a},t.is_palette_empty=function(t){var n=!0;return e.each(t,function(e){return this?(n=!1,!1):void 0}),n},t.get_grey=function(){var e=net.brehaut.Color("#FFFFFF");return e.setBlue(0).setRed(0).setGreen(0).setLightness(Math.random()).toCSS()},t.color_array_to_css=function(t){var n=[];return e.each(t,function(e){5>e&&n.push(this.toCSS())}),n},t.generate_palette_from_partial=function(t){var n=[];e.each(t,function(e,t){t&&n.push(t)});var a=[];return e.each(t,function(e,t){if(t)a.push(t);else{var o,h=r[Math.floor(Math.random()*r.length)],u=n[Math.floor(Math.random()*n.length)],i=n[Math.floor(Math.random()*n.length)];o="compliment"==h?u.shiftHue(180):"blend"==h?u.blend(i,.5):u,a.push(o)}}),a},t.randomize_palette=function(t,n){var a=[];return e.each(t,function(e){if(e>=5)return!1;if("-1"!=n.indexOf(e))return void a.push(this.toCSS());for(var t=this,r=0;2>r;r++){var h,u=o[Math.floor(Math.random()*o.length)];h="shiftHue"==u?Math.floor(45*Math.random())+1-23:(Math.floor(20*Math.random())+1)/100,t=t[u](h),1==r&&a.push(t.toCSS())}}),a},t.random_array=function(e,t){for(var n=[],a=45*t,r=0;e>r;r++)n.push(Math.floor(Math.random()*a)+1-a/2);return n},t.color_palettes={monochromatic:function(e){var t=[];return t.push(e),t.push(e.lightenByAmount(.3)),t.push(e.darkenByAmount(.1)),t.push(e.saturateByAmount(.5)),t.push(e.lightenByAmount(.2)),t},intesity_and_hue:function(e){var t=[];return t.push(e),t.push(e.shiftHue(20).lightenByAmount(.15)),t.push(e.shiftHue(-20).darkenByAmount(.2)),t.push(e.shiftHue(-33).darkenByAmount(.25)),t.push(e.shiftHue(10).lightenByAmount(.05)),t},complementaryScheme:function(e){var t=[];return t.push(e),t.push(e.shiftHue(180)),t.push(e.shiftHue(180).lightenByAmount(.25)),t.push(e.darkenByAmount(.25)),t.push(e.lightenByAmount(.25)),t},splitComplementaryScheme:function(e){var t=[];return t.push(e),t.push(e.shiftHue(150)),t.push(e.shiftHue(320)),t.push(e.shiftHue(320).darkenByAmount(.25)),t.push(e.lightenByAmount(.25)),t},splitComplementaryCWScheme:function(e){var t=[];return t.push(e),t.push(e.shiftHue(60)),t.push(e.shiftHue(210)),t.push(e.darkenByAmount(.1)),t.push(e.shiftHue(60).darkenByAmount(.15)),t},triadicScheme:function(e){var t=[];return t.push(e),t.push(e.shiftHue(60)),t.push(e.shiftHue(240)),t.push(e.shiftHue(60).lightenByAmount(.2)),t.push(e.lightenByAmount(.15)),t},tetradicScheme:function(e){var t=[];return t.push(e),t.push(e.shiftHue(90)),t.push(e.shiftHue(180)),t.push(e.shiftHue(270)),t.push(e.saturateByAmount(-.25)),t}}}(jQuery);