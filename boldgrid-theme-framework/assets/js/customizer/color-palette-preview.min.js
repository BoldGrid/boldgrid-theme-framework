var BOLDGRID=BOLDGRID||{};BOLDGRID.COLOR_PALETTE=BOLDGRID.COLOR_PALETTE||{},BOLDGRID.COLOR_PALETTE.Preview=BOLDGRID.COLOR_PALETTE.Preview||{},function(e){"use strict";var t=BOLDGRID.COLOR_PALETTE.Preview;t.$new_style=null,e(function(){parent.BOLDGRID&&parent.BOLDGRID.COLOR_PALETTE.Modify&&parent.BOLDGRID.COLOR_PALETTE.Modify.text_area_val&&t.update_css(parent.BOLDGRID.COLOR_PALETTE.Modify.text_area_val)}),t.update_css=function(a){if(a){var s=JSON.parse(a),n=e("body"),L=parent.BOLDGRID.COLOR_PALETTE.Modify.body_classes,O="";L&&e.each(L,function(){O+=this+" "}),n.removeClass(O).addClass(s.state["active-palette"]).data("current-body-class",s.state["active-palette"]);var r=document.createElement("style");r.type="text/css",r.innerHTML=parent.BOLDGRID.COLOR_PALETTE.Modify.compiled_css;var i=new RegExp(parent.BOLDGRIDSass.output_css_filename,"i"),_=!1;e("head link[href]").each(function(){e(this).attr("href")&&e(this).attr("href").match(i)&&(_=!0,t.$new_style&&t.$new_style.remove(),t.$new_style=e(r),t.$new_style.insertAfter(e(this)))}),!1===_&&(t.$new_style&&t.$new_style.remove(),t.$new_style=e(r),e("head").append(t.$new_style))}},wp.customize("boldgrid_color_palette",function(e){e.bind(t.update_css),e.bind(function(){parent.BOLDGRID.COLOR_PALETTE.Modify.$compiled_css_control.val(parent.BOLDGRID.COLOR_PALETTE.Modify.compiled_css).change()})})}(jQuery);