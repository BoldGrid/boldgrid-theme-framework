var BOLDGRID=BOLDGRID||{};BOLDGRID.Customizer=BOLDGRID.Customizer||{},BOLDGRID.Customizer.Util=BOLDGRID.Customizer.Util||{},BOLDGRID.Customizer.Widgets=BOLDGRID.Customizer.Widgets||{},BOLDGRID.Customizer.Util.bgtfwIsJSON=function(e){return!(!_.isString(e)||/^\s*$/.test(e))&&(e=e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@"),e=e.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),e=e.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(e))},BOLDGRID.Customizer.Util.bgtfwParseJSON=function(e){if(BOLDGRID.Customizer.Util.bgtfwIsJSON(e))try{var t=JSON.parse(e);if(t&&_.isObject(t))return t}catch(n){return!1}return!1},BOLDGRID.Customizer.Util.getInitialPalettes=function(e){var t,n,o;return _.isUndefined(e)&&(e=wp.customize("boldgrid_color_palette")()),t=BOLDGRID.Customizer.Util.bgtfwParseJSON(e),!(!t||_.isUndefined(t.state)||_.isUndefined(t.state.palettes)||_.isUndefined(t.state["active-palette"])||(o=t.state["active-palette"],_.isUndefined(t.state.palettes[o])||(o=t.state.palettes[o],_.isUndefined(o.colors)||(n=o.colors,_.isUndefined(o["neutral-color"])||n.push(o["neutral-color"]),!n.length))))&&n},function(e){var t,n;t=e("body"),n=e("#boldgrid-override-styles"),e(function(){m(),b(),i(),e(".site-description").addClass(_typographyClasses),e(document).on("customize-preview-menu-refreshed",function(e,t){_.isUndefined(BoldGrid)||"main"===t.wpNavMenuArgs.theme_location&&(_.isUndefined(BoldGrid.standard_menu_enabled)||BoldGrid.standard_menu_enabled.init(t.newContainer))})}),wp.customize("blogname",function(t){t.bind(function(t){e(".site-title a").text(t),o()})}),wp.customize.selectiveRefresh.bind("partial-content-rendered",function(e){"custom_logo"===e.partial.id&&o()}),e.each(["external_header_video","header_video"],function(e,t){wp.customize(t,function(e){e.bind(function(){wp.customize.preview.send("url",window.location.href)})})}),e.each(["bgtfw_site_title_typography","bgtfw_tagline_typography"],function(t,n){wp.customize(n,function(t){t.bind(function(n){e.each(["font-size","line-height","font-family","font-weight"],function(e,i){t[i]!==n[i]&&o()})})})}),wp.customize("blogdescription",function(t){t.bind(function(t){t?e(".site-description").text(t).removeClass("invisible"):e(".site-description").text("").addClass("invisible"),o()})});var o=function(){wp.customize("bgtfw_fixed_header")()?BoldGrid.header_fixed.calc():BoldGrid.custom_header.calc()};wp.customize("bgtfw_header_layout_position",function(t){t.bind(function(t){var n;e("body").removeClass("header-top header-left header-right").addClass(t),"header-left"!==t&&"header-right"!==t||(n=wp.customize("bgtfw_header_width")(),parent.kirkiSetSettingValue.set("bgtfw_header_width",n)),o()})}),wp.customize("bgtfw_fixed_header",function(t){t.bind(function(t){var n=e("body");t?n.addClass("header-fixed"):n.removeClass("header-fixed"),o()})}),wp.customize("bgtfw_header_top_layouts",function(t){t.bind(function(t){e("#masthead").removeClass(function(e,t){return(t.match(/(^|\s)layout-\S+/g)||[]).join(" ")}).addClass(t),o()})}),wp.customize("bgtfw_header_width",function(e){e.bind(function(){o()})}),wp.customize("bgtfw_footer_layouts",function(t){t.bind(function(t){e("#colophon").removeClass(function(e,t){return(t.match(/(^|\s)layout-\S+/g)||[]).join(" ")}).addClass(t)})}),wp.customize("boldgrid_color_palette",function(t){t.bind(function(t){var n,o;n=parent.$(".colors-wrapper"),o=BOLDGRID.Customizer.Util.getInitialPalettes(t),o&&_(n).each(function(t){var n=e(t).find("input");_(n).each(function(t,n){var i,a,r;i=e(t).val(),a=i.substring(0,i.indexOf(":")+1)+o[n],e(t).val(a),e(t).next().find(".color-palette-color").css("background",o[n]).text(o[n]),e(t).is(":checked")&&(r=e(t).data("customize-setting-link"),_.isUndefined(r)||parent.wp.customize(r).set(a))})})})}),wp.customize("custom_theme_css",function(t){t.bind(function(t){e("#boldgrid-custom-css").html(t)})}),wp.customize("boldgrid_background_vertical_position",function(e){e.bind(c)}),wp.customize("boldgrid_background_horizontal_position",function(e){e.bind(d)}),wp.customize("boldgrid_background_pattern",function(e){e.bind(f)}),wp.customize("boldgrid_background_color",function(e){e.bind(f)}),wp.customize("bgtfw_header_color",function(e){e.bind(function(e){var t,n,o,i,a;u("bgtfw_header_color","#masthead, #navi",["background-color","text-default"]),i=e.split(":").pop(),a=parent.net.brehaut.Color(i),o=".header-left #main-menu, .header-right #main-menu { background-color: "+a.setAlpha(.7).toString()+"; }",o+="@media (min-width: 768px) {",o+=".sm-clean ul, .sm-clean ul a, .sm-clean ul a:hover, .sm-clean ul a:focus, .sm-clean ul a:active, .sm-clean ul a.highlighted, .sm-clean span.scroll-up, .sm-clean span.scroll-down, .sm-clean span.scroll-up:hover, .sm-clean span.scroll-down:hover { background-color:"+a.setAlpha(.4).toString()+";}",o+=".sm-clean ul { border: 1px solid "+a.setAlpha(.4).toString()+";}",o+=".sm-clean > li > ul:before, .sm-clean > li > ul:after { border-color: transparent transparent "+a.setAlpha(.4).toString()+" transparent;}",o+="}",document.getElementById("bgtfw-menu-colors")?document.getElementById("bgtfw-menu-colors").innerHTML=o:(n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),t.type="text/css",t.id="bgtfw-menu-colors",t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o)),n.appendChild(t))})}),wp.customize("bgtfw_header_headings_color",function(e){e.bind(function(){l("bgtfw_header_headings_color","#navi-wrap > :not(.bgtfw-widget-row)")})}),wp.customize("bgtfw_footer_headings_color",function(e){e.bind(function(){l("bgtfw_footer_headings_color",".site-footer :not(.bgtfw-widget-row)")})}),wp.customize("bgtfw_header_links",function(e){e.bind(function(){u("bgtfw_header_links","#navi-wrap",["link-color"])})}),wp.customize("bgtfw_footer_color",function(e){e.bind(function(){u("bgtfw_footer_color","#colophon, .footer-content",["background-color","text-default"])})}),wp.customize("bgtfw_tagline_color",function(e){e.bind(function(){u("bgtfw_tagline_color",".site-description",["color"])})}),wp.customize("bgtfw_site_title_color",function(e){e.bind(function(){u("bgtfw_site_title_color",".site-title",["color"])})}),wp.customize("bgtfw_footer_links",function(e){e.bind(function(){u("bgtfw_footer_links",".footer-content",["link-color"])})}),wp.customize("boldgrid_background_type",function(e){e.bind(a)}),wp.customize("background_attachment",function(e){e.bind(s)}),wp.customize("background_image",function(e){e.bind(p)}),wp.customize("background_repeat",function(e){e.bind(g)}),wp.customize("boldgrid_background_image_size",function(e){e.bind(r)});var i=function(){e(".post-edit-link").on("click",function(){parent.location=e(this).attr("href")})},a=function(e){"pattern"===e?f():(t.css({"background-image":"","background-size":"","background-repeat":"","background-attachment":""}),m()),n.remove()},r=function(e){t.css("background-size",e)},s=function(n){if("parallax"===n)t.addClass("boldgrid-customizer-parallax-effect"),t.css("background-attachment","fixed"),t.css({"background-position":"0px 0px","background-attachment":"fixed"}),t.data("stellar-background-ratio","0.2"),t.stellar(),t.data("plugin_stellar")&&t.data("plugin_stellar").init();else{var o=e("body").data("plugin_stellar");o&&o.destroy(),r(wp.customize("boldgrid_background_image_size")()),t.css({"background-attachment":n}),c(),d(),g(),t.removeClass("boldgrid-customizer-parallax-effect")}},c=function(){var e=wp.customize("boldgrid_background_vertical_position")(),n=t.css("background-position"),o=n.split(" ")[0]+" "+5*e+"px";t.css("background-position",o)},d=function(){var e=wp.customize("boldgrid_background_horizontal_position")(),n=t.css("background-position"),o=5*e+"px "+n.split(" ")[1];t.css("background-position",o)},l=function(t,n){var o=[];_.each(_typographyOptions,function(e,t){(e.type="headings")&&o.push(n+" "+t)}),o=o.join(", "),u(t,e(o).not(".site-description"),["color"])},u=function(t,n,o){var i,a=e(n),r=new RegExp("color-?([\\d]|neutral)-("+o.join("|")+")(\\s+|$)","g");t=parent.wp.customize(t)(),t&&"none"!==t||(t=""),a.removeClass(function(e,t){return(t.match(r)||[]).join(" ")}),i=t.split(":").shift(),a.addClass(_.map(o,function(e){var t=i;return-1===i.indexOf("neutral")&&-1===e.indexOf("link-color")&&(t=i.replace("-","")),t+"-"+e}).join(" "))},f=function(){var e;e=wp.customize("boldgrid_background_pattern")(),e||(e="none"),n.remove(),t.css({"background-image":e,"background-size":"auto","background-repeat":"repeat","background-attachment":"scroll"}),u("boldgrid_background_color","body",["background-color","text-default"])},p=function(e){e=e?"url("+e+")":"",t.css({"background-image":e})},g=function(){t.css({"background-repeat":wp.customize("background_repeat")()})},m=function(){e("#custom-background-css").remove();var t=wp.customize("background_attachment")(),n=wp.customize("boldgrid_background_image_size")(),o=wp.customize("boldgrid_background_type")();if(f(),"pattern"!==o){s(t),r(n);var i=wp.customize("background_image")();p(i),"parallax"!==t&&(c(),d(),g())}},b=function(){var t;wp.customize.bind("ready",_.defer(function(){_.isFunction(parent.wp.customize.section)&&(t=parent.wp.customize.section("boldgrid_footer_panel").controls(),_(t).each(function(t){var n,o=new RegExp(/^(hide_)+\w*(_attribution)+$/,"m");o.test(t.id)&&parseInt(wp.customize(t.id)())&&(n="."+t.id.replace("hide_","").replace(/_/g,"-")+"-link",e(n).addClass("hidden"))})),w()}))},w=function(){e(".attribution-theme-mods > .link").removeClass("no-separator").filter(":visible").last().addClass("no-separator")};if(_.isFunction(parent.wp.customize.section)){var h=parent.wp.customize.section("boldgrid_footer_panel").controls();_(h).each(function(t){var n,o=new RegExp(/^(hide_)+\w*(_attribution)+$/,"m");o.test(t.id)&&wp.customize(t.id,function(o){n="."+t.id.replace(/hide_/,"").replace(/_/g,"-")+"-link",o.bind(function(t){t?e(n).addClass("hidden"):e(n).removeClass("hidden"),w()})})})}e(document).on("customize-preview-menu-refreshed",function(t,n){e.each(n.newContainer.closest("[data-is-parent-column]"),function(){BOLDGRID.Customizer.Widgets.updatePartial(e(this)),"secondary-menu"===n.container_id&&""!==wp.customize("bgtfw_header_container")()&&document.getElementById(n.container_id).classList.add(wp.customize("bgtfw_header_container")())})}),wp.customize.selectiveRefresh.bind("partial-content-rendered",function(e){"boldgrid_header_widgets"!==e.partial.id&&"boldgrid_footer_widgets"!==e.partial.id||BOLDGRID.Customizer.Widgets.updatePartial(e.container)}),BOLDGRID.Customizer.Widgets.updatePartial=function(e){e.find(".comment-reply-link").addClass("btn button-primary color1-text-contrast").css("transition","all .5s"),e.find(".widget_rss ul").addClass("media-list"),e.find(".widget_meta ul, .widget_recent_entries ul, .widget_archive ul, .widget_categories ul, .widget_nav_menu ul, .widget_pages ul").addClass("nav"),e.find(".widget_recent_comments ul#recentcomments").css({"list-style":"none","padding-left":"0"}),e.find(".widget_recent_comments ul#recentcomments li").css("padding","5px 15px"),e.find("table#wp-calendar").addClass("table table-striped"),e.find('.sidebar select, select[name="archive-dropdown"]').addClass("form-control"),e.find(".sidebar .button").removeClass("button").addClass("btn button-primary"),e.find(".woocommerce.widget .ui-slider").css("display","none"),e.find(".woocommerce.widget .ui-slider").css("display","block"),e.find(".woocommerce.widget .ui-slider").addClass("color1-background-color").children().addClass("color2-background-color"),e.find(".button").removeClass("button").addClass("btn button-primary"),e.find(".button.alt").removeClass("button alt").addClass("btn button-secondary")}}(jQuery);