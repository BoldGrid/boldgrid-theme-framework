var BOLDGRID=BOLDGRID||{};BOLDGRID.CustomizerEdit=BOLDGRID.CustomizerEdit||{},function(t){"use strict";var o,i,n;i=BOLDGRID,n=parent.wp.customize,BOLDGRID.CustomizerEdit={i18n:window.boldgridFrameworkCustomizerEdit||{},buttonCollisionSet:1,targetHighlightTop:!0,userIsScrolling:!1,buttonHeight:0,buttonWidth:0,defaultZindex:210,init:function(){o._onReady(),o._onLoad()},_onReady:function(){t(document).ready(o.adjustEmptyMenus)},_onLoad:function(){t(window).on("load",function(){o.start(),o._customizer(),setTimeout(function(){o.placeButtons()},3e3)})},_customizer:function(){var o;o=t("#main-menu"),o.length&&o.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd","ul",function(t){BOLDGRID.CustomizerEdit.placeButtons(),t.stopPropagation()}),wp.customize.preview.bind("setting",function(){clearTimeout(t.data(this,"previewBind")),t.data(this,"previewBind",setTimeout(function(){BOLDGRID.CustomizerEdit.placeButtons()},400))}),wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){BOLDGRID.CustomizerEdit.destroy(),BOLDGRID.CustomizerEdit.start()}),t(document).on("customize-preview-menu-refreshed",function(){BOLDGRID.CustomizerEdit.destroy(),BOLDGRID.CustomizerEdit.start()})},start:function(){o.$targetHighlight=t("#target-highlight"),o.addButtons(),o.buttonHeight=t("button[data-control]:visible").first().outerHeight(),o.buttonWidth=t("button[data-control]:visible").first().outerWidth(),o.placeButtons(),t(window).resize(function(){clearTimeout(t.data(this,"resizeTimer")),t.data(this,"resizeTimer",setTimeout(function(){o.placeButtons()},400))}),t(o.i18n.config.hamburgers).click(function(){setTimeout(o.placeButtons,400)}),t(window).scroll(function(){o.userIsScrolling=!0,clearTimeout(t.data(this,"scrollTimer")),t.data(this,"scrollTimer",setTimeout(function(){o.userIsScrolling=!1,o.windowScroll()},100))})},addButtons:function(){var i,e,a=_.isFunction(n.section)?n.section("menu_locations").controls():[],s=t(".empty-menu");_(o.i18n.config.buttons.general).each(function(i){1===t(i.selector).length&&o.addButton(i)}),e=o.getSections("sidebar-widgets-"),_(e).each(function(t){var i={control:t.id,selector:"#"+t.idSplit[1]+".sidebar",objectType:"section",isParentColumn:!0};o.addButton(i)}),_(a).each(function(n){var e;i=o.getMenuId(n),i&&(t("#"+i).attr("data-parent-column","#"+i),e={type:"nav_menu",control:n.setting._value,selector:"#"+i},o.addButton(e))}),_(s).each(function(i){var n={type:null,control:"new_menu_name",selector:"#"+t(i).attr("id"),icon:"dashicons-plus"};o.addButton(n)})},adjustEmptyMenus:function(){t(".empty-menu").parent(".navbar").addClass("empty-navbar")},buttonClick:function(i){var e,a=i.attr("data-control"),s=parent.window._wpCustomizeControlsL10n.cancel,r={width:400,resizable:!1,modal:!0},l=o.i18n.goThereNow,c=t(i.attr("data-selector")),d=t(".collapse-sidebar",parent.document),u=t(".customize-controls-preview-toggle .controls",parent.document),p=t(".wp-full-overlay",parent.document);return r.buttons={},r.buttons[l]=function(){parent.window.location=o.i18n.editPostLink},r.buttons[s]=function(){t(this).dialog("close")},"false"===d.attr("aria-expanded")&&d.click(),u.is(":visible")&&p.toggleClass("preview-only"),"entry-content"===a||"entry-title"===a?void t("#"+a).dialog(r):"section"===i.attr("data-object-type")?void n.section(a).focus():("new_menu_name"===a?(e=c.attr("data-theme-location"),n.control("nav_menu_locations["+e+"]").focus()):n.control(a).focus(),void setTimeout(function(){var o,i=t(":focus",parent.document);"hide_boldgrid_attribution"===a&&(i=t('ul#sub-accordion-section-boldgrid_footer_panel > li[id^="customize-control-hide_"][id$="_attribution"]',parent.document)),"hide_boldgrid_attribution"===a&&0==n("boldgrid_enable_footer")()&&(i=t(n.control("boldgrid_enable_footer").selector,parent.document)),0===a.lastIndexOf("nav_menu",0)&&(i=t(".customize-control-nav_menu_name",parent.document)),o=i.css("transition"),i.css({"min-height":i.outerHeight(),"min-width":i.outerWidth(),transition:"all 0s"}).effect("bounce",{times:3,distance:10},"slow",function(){t(this).css("transition",o)})},500))},buttonMouseEnter:function(i,n,e){var a,s=n.offset().top,r=e.offset(),l=n.outerHeight(),c=0;0===l&&n.find("*").each(function(){var o=t(this).outerHeight();o>l&&(l=o)}),"1"===i.attr("data-fixed-ancestor")?(o.$targetHighlight.css("position","fixed"),s=n.offset().top-t(window).scrollTop()):o.$targetHighlight.css("position","absolute"),o.$targetHighlight.stop(!0).css("width",e.outerWidth()).css("height",l).css("top",s).css("left",r.left).css("visibility","visible"),o.targetHighlightTop=setInterval(function(){c+=10,s="1"===i.attr("data-fixed-ancestor")?n.offset().top-t(window).scrollTop():n.offset().top,o.$targetHighlight.css("top",s),c>=400&&clearInterval(o.targetHighlightTop)},10),i.hasClass("new")&&(a=parseInt(i.attr("data-with-title-width")),i.stop(!0).html(" "+i.attr("data-title")).animate({"max-width":a+"px",left:o.right(i)-a},400)),o.isParentEmpty(n)&&(n.stop(!0).animate({height:o.buttonHeight},400),o.$targetHighlight.stop(!0).css("visibility","visible").animate({height:o.buttonHeight},400))},buttonMouseLeave:function(t,i){t.hasClass("new")&&t.stop(!0).animate({"max-width":30,left:t.attr("data-left")},400,function(){t.html("")}),clearInterval(o.targetHighlightTop),o.isParentEmpty(i)?(i.stop(!0).animate({height:"0px"},500),o.$targetHighlight.height()<=2?o.$targetHighlight.css("visibility","hidden"):o.$targetHighlight.stop(!0).animate({height:"0px"},400,function(){o.$targetHighlight.css("visibility","hidden")})):o.$targetHighlight.css("visibility","hidden")},collide:function(t,o){var i=!0,n=parseInt(t.attr("data-left")),e=parseInt(o.attr("data-left")),a=parseInt(t.attr("data-top")),s=parseInt(o.attr("data-top")),r=t.outerHeight(!0),l=o.outerHeight(!0),c=t.outerWidth(!0),d=o.outerWidth(!0),u=a+r,p=n+c,h=s+l,f=e+d;return(u<s||a>h||p<e||n>f)&&(i=!1),i},findCollision:function(){var i=[],n=t(".site-footer").last(),e=n.offset().top+n.outerHeight(!0);o.buttonCollisionSet=1,t("button[data-control]:visible").each(function(){i.push(t(this))}),i.sort(o.sortButtonsAsc),t.each(i,function(n,e){var a=t(e);n<i.length-1&&t.each(i,function(i,n){var e=t(n);a.is(e)||o.collide(a,e)&&o.fixCollision(a,e)})}),i.sort(o.sortButtonsDesc),_(i).each(function(o){var i,n,a=t(o),s=parseInt(a.attr("data-top"))+a.outerHeight(!0);s>e&&(i=s-e,n=a.attr("data-collision-set"),_.isUndefined(n)||t.each(t("[data-collision-set="+n+"]"),function(){var o=t(this),n=parseInt(o.attr("data-top")-i);o.attr("data-top",n)}))})},fixButtonPlacement:function(){var i='[data-control][style*="position: fixed"][data-fixed-ancestor="0"]:not(.highlight-button)';t(i).each(function(){var i=t(this);i.css("position","absolute").css("top",t(window).scrollTop()),o.placeButton(i),o.findCollision()})},fixCollision:function(t,i){var n=parseInt(t.attr("data-top")),e=parseInt(i.attr("data-top")),a=n>e?t:i,s=t.is(a)?i:t,r=s.attr("data-collision-set");a.attr("data-top",parseInt(s.attr("data-top"))+o.buttonHeight),"undefined"==typeof r&&(r=o.buttonCollisionSet,o.buttonCollisionSet++),a.attr("data-collision-set",r),s.attr("data-collision-set",r)},getFixedAncestors:function(o){var i=o.parents().filter(function(){return"fixed"===t(this).css("position")});return i},getMenuId:function(o){var i;return i=t('[data-customize-partial-placement-context*="'+o.themeLocation.replace("_","-")+'-menu-location"]').data(),i?i.customizePartialPlacementContext.container_id:null},getSections:function(t){var o=[];return n.section.each(function(i){i.id.startsWith(t)&&(i.idSplit=i.id.split(t),o.push(i))}),o},inView:function(o){var i=t(window),n=i.scrollTop(),e=n+i.height(),a=o.offset().top,s=a+o.height();return a<=e&&s>=n},isParentEmpty:function(t){return t.hasClass("empty-menu")},parentColumn:function(t){var o=null,i=!1,n=["div[class*=col-]","div[class^=row]","div[class^=container]","div","p"],e=t.attr("data-is-parent-column"),a=t.attr("data-parent-column");return e?t:(a&&n.unshift(a),_(n).each(function(n){!1===i&&(o=t.closest(n),o.length>0&&(i=!0))}),o)},placeButton:function(i){var n,e,a=t(i.attr("data-selector")),s=a.offset(),r=o.parentColumn(a),l=parseInt(i.attr("data-moves")),c=0===l?0:400,d=o.getFixedAncestors(a),u=d.length>0?"1":"0",p="absolute",h=o.right(r),f=t("body").outerWidth(!0);return i.attr("data-fixed-ancestor",u),d.length?(n=parseInt(d.last().css("z-index")),Number.isInteger(n)&&n>o.defaultZindex&&i.css("z-index",n+1)):i.css("z-index",""),a.hasClass("hidden")||a.hasClass("invisible")||!a.is(":visible")?void(0===l?i.hide():i.fadeOut()):(i.fadeIn(),h+o.buttonWidth>f&&(h=f-o.buttonWidth),"1"===i.attr("data-fixed-ancestor")?(p="fixed",e=s.top-t(window).scrollTop()):e=s.top,l++,void i.attr({"data-last-animation":"placeButton","data-moves":l,"data-top":e,"data-left":h,"data-duration":c}).css("position",p).removeAttr("data-collision-set"))},placeButtons:function(){t("button[data-control]").each(function(){var i=t(this).data("selector");t(i).length?o.placeButton(t(this)):o.removeButton(t(this))}),o.findCollision(),o.positionByData()},positionByData:function(){t("button[data-control]").each(function(){var o=t(this);o.hasClass("highlight-button")&&"fixed"===o.css("position")||o.hasClass("new")&&o.is(":animated")||o.attr("data-last-animation","positionByData").animate({top:parseInt(o.attr("data-top")),left:parseInt(o.attr("data-left"))},parseInt(o.attr("data-duration")))})},right:function(t,o){return o=!_.isUndefined(o)&&o,t.offset().left+t.outerWidth(o)},sortButtonsAsc:function(i,n){var e,a,s,r,l=i.offset().top,c=n.offset().top;return l===c&&(e=t(i.attr("data-selector")),s=e.offset().top,o.isParentEmpty(e)&&(s-=1),l=s,a=t(n.attr("data-selector")),r=a.offset().top,o.isParentEmpty(a)&&(r-=1),c=r),l<c?-1:l>c?1:0},sortButtonsDesc:function(t,o){var i=t.offset().top,n=o.offset().top;return n<i?-1:n>i?1:0},topInView:function(o){var i=t(window),n=i.scrollTop(),e=n+i.height(),a=o.offset().top;return 0===n&&a<0||a>=n&&a<=e},windowScroll:function(){var i,n,e,a='[data-control][style*="position: fixed"][data-fixed-ancestor="0"]:not(.highlight-button)';if(t(a).each(function(){var i=t(this),n=t(i.attr("data-selector"));i.css("position","absolute").css("top",t(window).scrollTop()),o.topInView(n)?(o.placeButton(i),o.findCollision(),o.positionByData()):i.attr("data-last-animation","animation-c").animate({top:"-="+o.buttonHeight},400,function(){o.placeButton(i),o.findCollision(),o.positionByData()})}),i=t('.highlight-button[data-control][data-fixed-ancestor="0"]'),1===i.length){if(n=t(i.attr("data-selector")),e="fixed"===i.css("position"),o.topInView(n)&&e)return i.attr("data-last-animation","animation-b").css("position","absolute").css("top",t(window).scrollTop()),o.placeButton(i),o.findCollision(),void o.positionByData();if(!o.topInView(n)&&!e)return void i.stop(!0).attr("data-last-animation","animation-a").css("position","fixed").css("top",-1*i.outerHeight()).animate({top:"0px"},400);if(!o.inView(n)&&e)return void i.animate({top:"-="+o.buttonHeight},400,function(){o.placeButton(i),o.findCollision(),o.positionByData()})}},addButton:function(i){var n,e,a=i.type?i.type:null,s=t("<button></button>"),r=t(i.selector),l=null===a?i.control:a+"["+i.control+"]",c=o.getFixedAncestors(r),d=c.length>0?"1":"0",u=r.hasClass("empty-menu");0===t("body").find('[data-selector="'+i.selector+'"]').length&&(i.requireText&&""===r.text().replace(/\s/g,"")||(n=_.isUndefined(i.icon)?o.i18n.config.defaultIcon:i.icon,s.addClass(n),i.isParentColumn&&r.attr("data-is-parent-column",!0),i.parentColumn&&r.attr("data-parent-column",i.parentColumn),e=o.parentColumn(r),u&&s.addClass("new").attr("data-title",o.i18n.menu),s.attr({"data-control":l,"data-selector":i.selector,"data-moves":0,"data-fixed-ancestor":d}),i.objectType&&s.attr("data-object-type",i.objectType),t("body").append(s),u&&s.css("max-width","100%").html(" "+s.attr("data-title")).attr("data-with-title-width",s.outerWidth(!0)).css("max-width","").html(""),s.hover(function(){o.buttonMouseEnter(s,r,e)},function(){o.buttonMouseLeave(s,r)}),s.on("click",function(){o.buttonClick(s)}),r.hover(function(){s.addClass("highlight-button"),o.topInView(r)||"fixed"===s.css("position")||!1!==o.userIsScrolling||s.attr("data-last-animation","ancar").css("position","fixed").css("top",-1*s.outerHeight()).animate({top:"0px"},400)},function(){s.removeClass("highlight-button")})))},removeButton:function(t){t.remove()},destroy:function(){t("button[data-control]").remove()}},o=BOLDGRID.CustomizerEdit}(jQuery),BOLDGRID.CustomizerEdit.init();