var BOLDGRID=BOLDGRID||{};BOLDGRID.Customizer_Edit=function(t){var i=this,e=parent.wp.customize;t(function(){i.initEdit()}),this.addButtons=function(){var o={blogname:".site-title",boldgrid_logo_size:".logo-site-title",boldgrid_enable_footer:".site-footer .attribution","entry-content":".entry-content","entry-title":".entry-title",blogdescription:".site-description"},n=_.keys(o);_(n).each(function(e){i.addButton(null,e,t(o[e]))}),t("aside.widget").each(function(){var e=t(this),o=e.attr("id");i.addButton("sidebar",o,e)}),t('aside[id^="black-studio-tinymce-"').each(function(){var e,o=t(this);e=o.attr("id").replace("black-studio-tinymce-","").trim(),i.addButton("widget_black-studio-tinymce",e,o)});var a;o=e.section("menu_locations").controls(),_(o).each(function(e){a=t("."+e.themeLocation.replace(/_/g,"-")+"-menu").find("ul").first(),i.addButton("nav_menu",e.setting._value,a)})},this.bindEdit=function(){t("[data-control]").on("click",function(){var i=t(this).attr("data-control"),o=boldgridFrameworkCustomizerEdit.cancel,n={width:400,resizable:!1,modal:!0},a=boldgridFrameworkCustomizerEdit.goThereNow;if(n.buttons={},n.buttons[a]=function(){parent.window.location=boldgridFrameworkCustomizerEdit.editPostLink},n.buttons[o]=function(){t(this).dialog("close")},"entry-content"==i||"entry-title"==i)return void t("#"+i).dialog(n);if(0===i.lastIndexOf("sidebar",0)){var s=i.match(/\[(.*?)\]/);e.Widgets.focusWidgetFormControl(s[1])}else e.control(i).focus();setTimeout(function(){var o=t(":focus",parent.document);"boldgrid_enable_footer"===i&&(o=t(e.control(i).selector,parent.document)),0===i.lastIndexOf("nav_menu",0)&&(o=t(".customize-control-nav_menu_name",parent.document)),o.css({"min-height":o.outerHeight(),"min-width":o.outerWidth()}).effect("bounce",{times:3,distance:10},"slow")},500)})},this.fadeOut=function(){t("[data-control]").css("opacity","1").animate({opacity:.5},2e3,function(){t("[data-control]").css("opacity","")})},this.initEdit=function(){i.addButtons(),i.bindEdit(),i.fadeOut()},this.addButton=function(i,e,o){if(!o.hasClass("hidden")&&o.is(":visible")){var n,a;if(n=t("<button></button>"),a=t('<div class="edit-button"></div>'),0===o.outerHeight()){var s=0;o.find("div,p,a,span").each(function(){var i=t(this).height();i>0&&i>s&&(s=i)}),o.height(s)}null===i?n.attr("data-control",e):n.attr("data-control",i+"["+e+"]"),a.append(n),o.before(a);var r=o.closest("div[class*=col-]"),d=r.offset();void 0===d&&(r=o.closest("div[class*=row]"),d=r.offset());var h=a.offset();if(void 0!==d){var c=t("body").width(),l=d.left,g=r.outerWidth(),u=c-(l+g),f=h.left,m=a.outerWidth(),v=c-(f+m),b=u-v;a.css("margin-right",b),a.css("margin-left",l-f)}0>o.css("margin-top").replace("px","")&&n.css("top","+="+o.css("margin-top")),o.hover(function(){n.addClass("highlight-button")},function(){n.removeClass("highlight-button")}),n.hover(function(){o.addClass("highlight-parent");var i=o.offset();t("#target-highlight").css("left",i.left-t(window).scrollLeft()),t("#target-highlight").css("top",i.top-t(window).scrollTop()),t("#target-highlight").css("width",o.outerWidth()),t("#target-highlight").css("height",o.outerHeight()),t("#target-highlight").addClass("target-highlight-shadow");var e=n.offset(),a=t("#target-highlight").offset(),s=a.left+t("#target-highlight").outerWidth();s-5>e.left&&t("#target-highlight").css("width","-="+(s-e.left)+"px")},function(){t("#target-highlight").removeClass("target-highlight-shadow"),o.removeClass("highlight-parent"),t("#target-highlight").css("width","0px"),t("#target-highlight").css("height","0px")})}}},new BOLDGRID.Customizer_Edit(jQuery);