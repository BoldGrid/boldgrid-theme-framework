import{PaletteSelector}from"../color/palette-selector";import{Border as BaseBorder}from"@boldgrid/controls/src/controls/border";const $=window.jQuery;export class Border extends BaseBorder{constructor(t,e){super(t),this.paletteSelector=new PaletteSelector,this.wpControl=e,this.colorControl=wp.customize.control(e.id+"_color")}render(){let t=super.render();return this.colorControl&&(this.toggleVisibility(this.getSettings()),this._bindBorderColor(),this._bindParentChange(),this._bindCustomizerRefresh()),t}toggleVisibility(t){return t.type?this.colorControl.activate():this.colorControl.deactivate()}getSettings(){let t=super.getSettings();if(this.colorControl){let e=this.paletteSelector.getColor(this.colorControl.setting()),o=this.controlOptions.control.selectors.join(",")+"{border-color:"+e+"}";t.css+=o}return t}_bindCustomizerRefresh(){$(window).on("boldgrid_customizer_refresh",()=>{this.toggleVisibility(this.getSettings())})}_bindBorderColor(){this.colorControl.setting.bind(()=>this.events.emit("change",this.getSettings()))}_bindParentChange(){this.events.on("change",t=>this.toggleVisibility(t))}};