import{PaletteSelector}from"../color/palette-selector";import{Border as BaseBorder}from"@boldgrid/controls/src/controls/border";export class Border extends BaseBorder{constructor(t,o){super(t),this.paletteSelector=new PaletteSelector,this.wpControl=o,this.colorControl=wp.customize.control(o.id+"_color")}render(){let t=super.render();return this.colorControl&&(this.toggleVisibility(),this._bindBorderColor(),this._bindParentChange(),this._bindCustomizerRefresh()),t}toggleVisibility(){return this.settings.media&&this.settings.media[this.getSelectedDevice()].type?this.colorControl.activate({duration:0}):this.colorControl.deactivate({duration:0})}getCssRule(t){let o=super.getCssRule(t);return this.colorControl&&this.colorControl.setting()&&(o+="border-color:"+this.paletteSelector.getColor(this.colorControl.setting())+";"),o}applySettings(t){super.applySettings(t),this.colorControl&&this.colorControl.setting(t.color||null)}getSettings(){let t=super.getSettings();return this.colorControl&&(t.color=this.colorControl.setting()),t}_bindCustomizerRefresh(){$(window).on("boldgrid_customizer_refresh",()=>{this.toggleVisibility()})}_bindBorderColor(){this.colorControl.setting.bind(()=>this._triggerChangeEvent())}_bindParentChange(){this.events.on("change",()=>this.toggleVisibility())}}