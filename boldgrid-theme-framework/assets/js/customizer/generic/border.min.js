import{PaletteSelector}from"../color/palette-selector";import{Border as BaseBorder}from"@boldgrid/controls/src/controls/border";const $=window.jQuery;export class Border extends BaseBorder{constructor(t,e){super(t),this.paletteSelector=new PaletteSelector,this.wpControl=e,this.colorControl=wp.customize.control(e.id+"_color")}render(){let t=super.render();return this.colorControl&&(this.toggleVisibility(),this._bindBorderColor(),this._bindParentChange(),this._bindCustomizerRefresh()),t}toggleVisibility(){return this.settings.media&&this.settings.media[this.getSelectedDevice()].type?this.colorControl.activate():this.colorControl.deactivate()}getSettings(){let t=super.getSettings();if(this.colorControl){let e=this.paletteSelector.getColor(this.colorControl.setting()),o=this.controlOptions.control.selectors.join(",")+"{border-color:"+e+"}";t.css+=o}return t}_bindCustomizerRefresh(){$(window).on("boldgrid_customizer_refresh",()=>{this.toggleVisibility()})}_bindBorderColor(){this.colorControl.setting.bind(()=>this._triggerChangeEvent())}_bindParentChange(){this.events.on("change",()=>this.toggleVisibility())}};