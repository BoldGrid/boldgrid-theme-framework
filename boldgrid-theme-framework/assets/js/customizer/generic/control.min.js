import{BorderRadius}from"@boldgrid/controls/src/controls/border-radius";import{Margin}from"@boldgrid/controls/src/controls/margin";import{Padding}from"@boldgrid/controls/src/controls/padding";import{BoxShadow}from"@boldgrid/controls/src/controls/box-shadow";import{Border}from"@boldgrid/controls/src/controls/border";import{MultiSlider}from"@boldgrid/controls/src/controls/multi-slider";import"../../../scss/customizer/controls/_generic.scss";var $=window.jQuery;export class Control{constructor(){this.classes={BorderRadius:BorderRadius,BoxShadow:BoxShadow,MultiSlider:MultiSlider,Border:Border,Padding:Padding,Margin:Margin}}init(){return $(()=>this._bindConfigs()),this}_bindConfigs(){wp.customize.control.each(r=>{r.params.choices&&"boldgrid_controls"===r.params.choices.name&&this._setupControl(r)})}_setupControl(r){let o,s=r.params.choices.settings||{};this._setDefaults(r,s),o=new this.classes[r.params.choices.type](s),this._bindRender(r,o),this._bindChangeEvent(r,o)}_setDefaults(r,o){let s=r.setting.get()||!1;if(_.isObject(s)){o.defaults=s;try{o.defaults.values=JSON.parse(o.defaults.values)||{}}catch(r){o.defaults.values={}}}}_bindRender(r,o){r.deferred.embedded.done(()=>{setTimeout(()=>{const s=$(r.selector).find("input");s.after(o.render()),s.replaceWith($('<input type="text">').hide())})})}_bindChangeEvent(r,o){let s=_.throttle(o=>{o.values=JSON.stringify(o.values),r.setting.set(o)},50);o.events.on("change",s)}};