var BOLDGRID=BOLDGRID||{};BOLDGRID.CUSTOMIZER=BOLDGRID.CUSTOMIZER||{},BOLDGRID.CUSTOMIZER.Search=BOLDGRID.CUSTOMIZER.Search||{},function(e){var t="";BOLDGRID.CUSTOMIZER.Search={controls:[],_init:function(){this._bind(),BOLDGRID.CUSTOMIZER.Search.controls=e.map(_wpCustomizeSettings.controls,function(t){return e.map(_wpCustomizeSettings.sections,function(a){t.section===a.id&&e.map(_wpCustomizeSettings.panels,function(e){""===a.panel&&(t.panelName=a.title),a.panel===e.id&&(t.sectionName=a.title,t.panel=a.panel,t.panelName=e.title)})}),[t]}),e.map(_wpCustomizeSettings.sections,function(e){var t,a;"sidebar"===e.type&&(t=wp.customize.section(e.id),a=wp.customize.panel(t.params.panel),_.each(t.sidebarMeta.controls,function(e){var c;(c=e.params).label=c.label.replace(/:/g,""),c.sectionName=t.params.title,c.section=t.params.id,c.panel=a.params.id,c.panelName=a.params.title,BOLDGRID.CUSTOMIZER.Search.controls.push(c)}))}),t=document.getElementById("customize-theme-controls"),customizePanelsParent=e("#customize-theme-controls"),customizePanelsParent.after('<div id="search-results"></div>'),e(document).on("keyup","#customizer-search-input",function(t){t.preventDefault(),$this=e("#customizer-search-input"),string=$this.val(),string.length>0?BOLDGRID.CUSTOMIZER.Search.displayMatches(string,BOLDGRID.CUSTOMIZER.Search.controls):BOLDGRID.CUSTOMIZER.Search._clearSearch()}),e(document).on("click",".clear-search",function(){BOLDGRID.CUSTOMIZER.Search._clearSearch()}),e(document).on("click",".customize-search-toggle",function(){BOLDGRID.CUSTOMIZER.Search._toggleSearchForm()}),e(document).on("click",".customize-controls-preview-toggle",function(){BOLDGRID.CUSTOMIZER.Search._closeSearchForm()})},expandSection:function(){var e=this.getAttribute("data-section"),t=wp.customize.section(e);BOLDGRID.CUSTOMIZER.Search._clearSearch(),BOLDGRID.CUSTOMIZER.Search._closeSearchForm(),t.expand()},displayMatches:function(e,a){var c;0!==(c=BOLDGRID.CUSTOMIZER.Search.findMatches(e,a)).length&&(html=c.map(function(t){var a,c,n;if(""!==t.label)return a=t.panelName,""!==t.sectionName&&(a=a+" â–¸ "+t.sectionName),n=new RegExp(e,"gi"),c=t.label.replace(n,'<span class="hl">$&</span>'),a=a.replace(n,'<span class="hl">$&</span>'),'<li id="accordion-section-'+t.section+'" class="accordion-section control-section control-section-default customizer-search-results" aria-owns="sub-accordion-section-'+t.section+'" data-section="'+t.section+'"><h3 class="accordion-section-title" tabindex="0">'+c+'<span class="screen-reader-text">Press return or enter to open this section</span></h3><span class="search-setting-path">'+a+"</i></span></li>"}).join(""),t.classList.add("search-not-found"),document.getElementById("search-results").innerHTML='<ul id="customizer-search-results">'+html+"</ul>",document.querySelectorAll("#search-results .accordion-section").forEach(function(e){return e.addEventListener("click",BOLDGRID.CUSTOMIZER.Search.expandSection)}))},findMatches:function(e,t){return t.filter(function(t){var a;return null==t.panelName&&(t.panelName=""),null==t.sectionName&&(t.sectionName=""),a=new RegExp(e,"gi"),t.label.match(a)||t.panelName.match(a)||t.sectionName.match(a)})},_bind:function(){wp.customize.previewer.targetWindow.bind(e.proxy(this._renderTemplate,this))},_renderTemplate:function(){var t;t=wp.template("search-button"),0===e("#customize-header-actions .customize-search-toggle").length&&e("#customize-header-actions").append(t()),t=wp.template("search-form"),0===e("#accordion-section-customizer-search").length&&e("#customize-header-actions").after(t())},_toggleSearchForm:function(){e("#accordion-section-customizer-search").hasClass("open")?BOLDGRID.CUSTOMIZER.Search._closeSearchForm():BOLDGRID.CUSTOMIZER.Search._openSearchForm(),e("#customizer-search-input").focus()},_closeSearchForm:function(){var t,a;t=e("#customize-notifications-area").outerHeight(),e("#accordion-section-customizer-search").outerHeight(),a=e("#customize-notifications-area:hidden").length?0:1,e("#accordion-section-customizer-search").removeClass("open").slideUp("fast"),e("#customize-header-actions .customize-search-toggle").removeClass("open"),e(".wp-full-overlay-sidebar-content").animate({top:45+t+a+"px"},"fast"),e("#customize-notifications-area").animate({top:e("#customize-header-actions").outerHeight()+"px"},"fast"),BOLDGRID.CUSTOMIZER.Search._clearSearch()},_openSearchForm:function(){var t,a,c;a=e("#customize-notifications-area").height(),t=e("#accordion-section-customizer-search").height(),c=e("#customize-notifications-area:hidden").length?0:1,e(".customize-panel-description").removeClass("open").slideUp("fast"),e("#customize-header-actions .customize-search-toggle").addClass("open"),e("#accordion-section-customizer-search").addClass("open").slideDown("fast"),e("#customize-notifications-area").animate({top:e("#customize-header-actions").height()+t+2+"px"},"fast"),e(".wp-full-overlay-sidebar-content").animate({top:81+a+c+"px"},"fast")},_clearSearch:function(){document.getElementById("customize-theme-controls").classList.remove("search-not-found"),document.getElementById("search-results").innerHTML="",document.getElementById("customizer-search-input").value="",e("#customizer-search-input").focus()}},e(function(){BOLDGRID.CUSTOMIZER.Search._init()})}(jQuery);