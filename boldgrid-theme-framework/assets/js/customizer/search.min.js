var BOLDGRID=BOLDGRID||{};BOLDGRID.CUSTOMIZER=BOLDGRID.CUSTOMIZER||{},BOLDGRID.CUSTOMIZER.Search=BOLDGRID.CUSTOMIZER.Search||{},function(e){var t="#customizer-search-input",c="";BOLDGRID.CUSTOMIZER.Search={_init:function(){this._bind();var n=e.map(_wpCustomizeSettings.controls,function(t){return e.map(_wpCustomizeSettings.sections,function(c){t.section===c.id&&e.map(_wpCustomizeSettings.panels,function(e){""===c.panel&&(t.panelName=c.title),c.panel===e.id&&(t.sectionName=c.title,t.panel=c.panel,t.panelName=e.title)})}),[t]});e.map(_wpCustomizeSettings.sections,function(e){var t,c;"sidebar"===e.type&&(t=wp.customize.section(e.id),c=wp.customize.panel(t.params.panel),_.each(t.sidebarMeta.controls,function(e){var a;a=e.params,a.label=a.label.replace(/:/g,""),a.sectionName=t.params.title,a.section=t.params.id,a.panel=c.params.id,a.panelName=c.params.title,n.push(a)}))}),c=document.getElementById("customize-theme-controls"),customizePanelsParent=e("#customize-theme-controls"),customizePanelsParent.after('<div id="search-results"></div>'),e(document).on("keyup",t,function(c){c.preventDefault(),$this=e(t),string=$this.val(),string.length>0?BOLDGRID.CUSTOMIZER.Search.displayMatches(string,n):BOLDGRID.CUSTOMIZER.Search._clearSearch()}),e(document).on("click",".clear-search",function(){BOLDGRID.CUSTOMIZER.Search._clearSearch()}),e(document).on("click",".customize-search-toggle",function(){BOLDGRID.CUSTOMIZER.Search._toggleSearchForm()}),e(document).on("click",".customize-controls-preview-toggle",function(){BOLDGRID.CUSTOMIZER.Search._closeSearchForm()})},expandSection:function(){var e=this.getAttribute("data-section"),t=wp.customize.section(e);BOLDGRID.CUSTOMIZER.Search._clearSearch(),BOLDGRID.CUSTOMIZER.Search._closeSearchForm(),t.expand()},displayMatches:function(e,t){var n,a;n=BOLDGRID.CUSTOMIZER.Search.findMatches(e,t),0!==n.length&&(html=n.map(function(t){var c,n,a;if(""!==t.label)return c=t.panelName,""!==t.sectionName&&(c=c+" â–¸ "+t.sectionName),a=new RegExp(e,"gi"),n=t.label.replace(a,'<span class="hl">$&</span>'),c=c.replace(a,'<span class="hl">$&</span>'),'<li id="accordion-section-'+t.section+'" class="accordion-section control-section control-section-default customizer-search-results" aria-owns="sub-accordion-section-'+t.section+'" data-section="'+t.section+'"><h3 class="accordion-section-title" tabindex="0">'+n+'<span class="screen-reader-text">Press return or enter to open this section</span></h3><span class="search-setting-path">'+c+"</i></span></li>"}).join(""),c.classList.add("search-not-found"),document.getElementById("search-results").innerHTML='<ul id="customizer-search-results">'+html+"</ul>",a=document.querySelectorAll("#search-results .accordion-section"),a.forEach(function(e){return e.addEventListener("click",BOLDGRID.CUSTOMIZER.Search.expandSection)}))},findMatches:function(e,t){return t.filter(function(t){var c;return null==t.panelName&&(t.panelName=""),null==t.sectionName&&(t.sectionName=""),c=new RegExp(e,"gi"),t.label.match(c)||t.panelName.match(c)||t.sectionName.match(c)})},_bind:function(){wp.customize.previewer.targetWindow.bind(e.proxy(this._renderTemplate,this))},_renderTemplate:function(){var t;t=wp.template("search-button"),0===e("#customize-info .accordion-section-title .customize-search-toggle").length&&e("#customize-header-actions").append(t()),t=wp.template("search-form"),0===e("#customize-info #accordion-section-customizer-search").length&&e("#customize-header-actions").after(t())},_toggleSearchForm:function(){e("#accordion-section-customizer-search").hasClass("open")?BOLDGRID.CUSTOMIZER.Search._closeSearchForm():BOLDGRID.CUSTOMIZER.Search._openSearchForm(),e(t).focus()},_closeSearchForm:function(){e("#accordion-section-customizer-search").removeClass("open").slideUp("fast"),e("#customize-header-actions .customize-search-toggle").removeClass("open"),e(".wp-full-overlay-sidebar-content").animate({top:"45px"},"fast"),BOLDGRID.CUSTOMIZER.Search._clearSearch()},_openSearchForm:function(){e(".customize-panel-description").removeClass("open").slideUp("fast"),e("#customize-header-actions .customize-search-toggle").addClass("open"),e("#accordion-section-customizer-search").addClass("open").slideDown("fast"),e(".wp-full-overlay-sidebar-content").animate({top:"81px"},"fast")},_clearSearch:function(){var c=document.getElementById("customize-theme-controls");c.classList.remove("search-not-found"),document.getElementById("search-results").innerHTML="",document.getElementById("customizer-search-input").value="",e(t).focus()}},e(function(){BOLDGRID.CUSTOMIZER.Search._init()})}(jQuery);