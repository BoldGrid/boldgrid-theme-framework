import{Preview as PreviewUtility}from"../preview";import PaletteSelector from"../color/palette-selector";const api=wp.customize,$=jQuery;export class LinkPreview{constructor(){this.previewUtility=new PreviewUtility,this.paletteSelector=new PaletteSelector,this.selectors=[]}bindEvents(){$(()=>this.selectors=this.getSelectors()),api("bgtfw_body_link_color","bgtfw_body_link_color_hover","bgtfw_body_link_decoration","bgtfw_body_link_decoration_hover",(...t)=>{t.map(t=>{t.bind(()=>this.updateStyles())})})}getSelectors(){let t=["#content a"];return parent.wp.customize.control&&parent.wp.customize.control("bgtfw_body_link_color")&&(t=parent.wp.customize.control("bgtfw_body_link_color").params.choices.selectors),t}updateStyles(){let t=this._getColor("bgtfw_body_link_color"),e=this._getColor("bgtfw_body_link_color_hover"),o=this._getDecoration("bgtfw_body_link_decoration"),r=this._getDecoration("bgtfw_body_link_decoration_hover"),i=this.selectors,n="";for(let l of i)n+=`\n\t\t\t\t${l+=":not(.btn):not(.button-primary):not(.button-secondary)"} {\n\t\t\t\t\tcolor: ${t};\n\t\t\t\t\ttext-decoration: ${o};\n\t\t\t\t}\n\t\t\t\t${l}:hover {\n\t\t\t\t\tcolor: ${e};\n\t\t\t\t\ttext-decoration: ${r};\n\t\t\t\t}\n\t\t\t`;this.previewUtility.updateDynamicStyles("bgftw-body-link-inline-css",n)}_getDecoration(t){return api(t)()?"underline":"none"}_getColor(t){let e=api(t)()||"";return this.paletteSelector.getColor(e)}};