const api=wp.customize,$=jQuery;export class Preview{bindEvents(){$(()=>this._bindTypography())}getCSS(e){_.isUndefined(e)&&(e=api("bgtfw_headings_typography")()),_.isString(e)&&(e=JSON.parse(e));let t=api("bgtfw_headings_font_size")(),i="";return _.each(BOLDGRID.CUSTOMIZER.data.customizerOptions.typography.selectors,function(e,a){var s;"headings"===e.type&&(s=t*e.amount,"ceil"===e.round&&(s=Math.ceil(s)),"floor"===e.round&&(s=Math.floor(s)),i+=a+"{font-size:"+s+"px;}")}),i}addStyle(e){if(document.getElementById("bgtfw-headings-typography"))document.getElementById("bgtfw-headings-typography").innerHTML=e;else{let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="bgtfw-headings-typography",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}document.getElementById("kirki-postmessage-bgtfw_headings_typography")&&$("#bgtfw-headings-typography").insertAfter("#kirki-postmessage-bgtfw_headings_typography")}_bindTypography(){this.addStyle(this.getCSS(api("bgtfw_headings_typography")())),api("bgtfw_headings_typography",e=>e.bind(e=>this.addStyle(this.getCSS(e)))),api("bgtfw_headings_font_size",e=>e.bind(e=>this.addStyle(this.getCSS(e))))}}