const api=wp.customize,$=jQuery;export class Preview{bindEvents(){api.bind("preview-ready",()=>this._bindTypography)}getCSS(e){_.isUndefined(e)&&(e=api("bgtfw_headings_typography")()),_.isString(e)&&(e=JSON.parse(e));let t=e["font-size"],i=t.replace(/[^0-9.]/gi,""),a=t.replace(/[^a-z]/gi,"");("auto"!==a&&"inherit"!==a&&"initial"!==a&&-1===$.inArray(a,["fr","rem","em","ex","%","px","cm","mm","in","pt","pc","ch","vh","vw","vmin","vmax"])||_.isEmpty(a))&&(a="px");let n="";return _.each(BOLDGRID.CUSTOMIZER.data.customizerOptions.typography.selectors,function(e,t){var p;"headings"===e.type&&(p=i*e.amount,"ceil"===e.round&&(p=Math.ceil(p)),"floor"===e.round&&(p=Math.floor(p)),n+=t+"{font-size:"+p+a+";}")}),n}addStyle(e){if(document.getElementById("bgtfw-headings-typography"))document.getElementById("bgtfw-headings-typography").innerHTML=e;else{let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="bgtfw-headings-typography",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}document.getElementById("kirki-postmessage-bgtfw_headings_typography")&&$("#bgtfw-headings-typography").insertAfter("#kirki-postmessage-bgtfw_headings_typography")}_bindTypography(){api("bgtfw_headings_typography",e=>e.bind(e=>this.addStyle(this.getCSS(e))))}};