var BOLDGRID=BOLDGRID||{};BOLDGRID.CUSTOMIZER=BOLDGRID.CUSTOMIZER||{},function(e){"use strict";BOLDGRID.CUSTOMIZER.WidgetPreview={};var t=BOLDGRID.CUSTOMIZER.WidgetPreview;t.hover_bound=!1,t.section_click_bound=!1,e(function(){$window.on("boldgrid_customizer_refresh",onload)}),onload=function(){t.section_selector=a(),t.$previewer=e(wp.customize.previewer.container).find("iframe").last().contents(),o(),i(),t.$widget_overlay=e('<div id="boldgrid-widget-area-overlay" class="widget-area-overlay hidden"><h2>Widget Area</h2></div>'),t.$previewer.find("body").find("#boldgrid-widget-area-overlay").length||t.$previewer.find("body").append(t.$widget_overlay),t.$widget_overlay=t.$previewer.find("body").find("#boldgrid-widget-area-overlay")};var i=function(){!0!==t.section_click_bound&&(e(t.section_selector).on("click",function(){d(),t.$previewer.find("[data-widget-area][data-empty-area]").css({width:"",height:""})}),t.section_click_bound=!0)},o=function(){t.section_selector&&!1===t.hover_bound&&(t.hover_bound=!0,e(t.section_selector).hoverIntent(function(){if(t.complete_event=!0,!e(this).hasClass("open")){var i=t.$previewer.find('[data-widget-area="'+this.id+'"]');i.is(":visible")&&i.length&&(i.attr("data-empty-area")&&(i.css({width:"100%",height:"50px"}),t.$widget_overlay.find("h2").prepend('<span class="empty-phrase-heading">Empty <span>'),t.$widget_overlay.addClass("empty-widget-area")),r(i))}},function(){if(!1!==t.complete_event){t.complete_event=!1;var e=t.$previewer.find('[data-widget-area="'+this.id+'"]');e.is(":visible")&&e.length&&(e.attr("data-empty-area")&&e.css({width:"",height:""}),d())}}))},d=function(){t.$widget_overlay.find(".empty-phrase-heading").remove(),t.$widget_overlay.addClass("hidden").removeClass("empty-widget-area")},r=function(i){var o,d=i[0].getBoundingClientRect(),r=i.outerHeight(!0),a=i.outerWidth(!0);i.find("*").each(function(){var t=e(this),i=t.outerHeight(!0),o=t.outerWidth(!0);i>r&&(r=i),o>a&&(a=o)}),t.$widget_overlay.css({width:d.width,height:r,left:i.offset().left,top:i.offset().top}).removeClass("hidden"),o=i.offset().top-65,wp.customize("bgtfw_fixed_header")()&&"header-top"===wp.customize("bgtfw_header_layout_position")()&&(o-=t.$previewer.find(".bgtfw-header-stick").outerHeight()),t.$previewer.find("html, body").stop().animate({scrollTop:o},750)},a=function(){var t=wp.customize.panel("widgets").sections(),i="",o=!0;return e.each(t,function(){!1===o&&(i+=","),i+="#accordion-section-"+this.id+":not(.open)",o=!1}),i}}(jQuery);